<script>
    async function fetchRSS() {
        const feeds = [
            'https://filmphotographyproject.com/feed/',
            'http://www.fujirumors.com/feed/' // Your new feed
            // Add more feeds here
        ];

        for (const feed of feeds) {
            try {
                const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${feed}`);
                const data = await response.json();

                const feedContainer = document.getElementById('feed');
                const logoUrl = data.feed.image.url;  // Get the image URL from the channel

                data.items.forEach(item => {
                    const article = document.createElement('div');
                    article.className = 'feed-item';

                    // Build HTML
                    const descriptionWithoutPost = item.description.replace(/<p>The post.*<\/p>/, ''); // Remove "This post" link

                    // Check for an image in the feed item or extract the first image from the content
                    let postImage = logoUrl; // Default to channel logo
                    const contentMatch = item.content.match(/<img.*?src="(.*?)"/);
                    if (contentMatch && contentMatch[1]) {
                        postImage = contentMatch[1]; // Use the first image found in the content
                    }

                    article.innerHTML = `
                        <img src="${postImage}" alt="Post Image">  <!-- Use extracted or default image -->
                        <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
                        <p>${descriptionWithoutPost}</p>
                    `;
                    feedContainer.appendChild(article);
                });
            } catch (error) {
                console.error('Error fetching RSS feed:', error);
            }
        }
    }

    fetchRSS();
</script>
